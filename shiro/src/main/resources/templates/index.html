<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <!-- 引入vue -->
    <script src="../../plugins/vue.min.js"></script>
    <!-- 引入jquery -->
    <script src="../../plugins/jquery.min.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet"
          href="../../plugins/element-ui/theme-default/index.css">
    <!--引入组件库-->
    <script src="../../plugins/element-ui/index.js"></script>
    <title>Insert title here</title>
</head>
<style>
    .html {
        height: 100%;
    }
</style>
<body>
<div id="rrapp">
        <!--<el-header>
                <el-tabs v-model="activeName" @tab-click="handleClick">
                    <el-tab-pane label="用户管理" name="first"></el-tab-pane>
                    <el-tab-pane label="配置管理" name="second"></el-tab-pane>
                    <el-tab-pane label="角色管理" name="third"></el-tab-pane>
                    <el-tab-pane label="定时任务" name="fourth"></el-tab-pane>
                </el-tabs>
        </el-header>
        <el-aside width="300px" style="height: 850px ">
            <el-tree :data="treeList"
                 :props="defaultProps"
                  default-expand-all="true"
                 @node-click="handleNodeClick"
                 node-key="nodeId"
                 show-checkbox=true>
            </el-tree>
        </el-aside>
        <el-main>
            主要区域容器。
        </el-main>

        <el-footer>
            底栏容器。

        </el-footer>
-->
   <!-- <el-container>
        <el-aside width="200px">

            <el-tree :data="treeList"
                     :props="defaultProps"
                     default-expand-all="true"
                     @node-click="handleNodeClick"
                     node-key="nodeId"
                     show-checkbox=true>
            </el-tree>

        </el-aside>
        <el-container>
            <el-header>某某管理系统
            </el-header>
            <el-main>

            </el-main>
            <el-footer>往后余生-风雪是你</el-footer>
        </el-container>
    </el-container>-->
    <el-container>
        <el-aside class="app-side app-side-left"
                  :class="isCollapse ? 'app-side-collapsed' : 'app-side-expanded'">
            <div class="app-side-logo">
                <img src="../../img/IronmanMIII.png"
                     :width="isCollapse ? '60' : '60'"
                     height="60" />
            </div>
            <div>

                <el-tree :data="treeList"
                         :props="defaultProps"
                         default-expand-all="true"
                         @node-click="handleNodeClick"
                         node-key="nodeId"
                         show-checkbox=true>
                </el-tree>
                <!--&lt;!&ndash; 我是样例菜单 &ndash;&gt;
                <el-menu default-active="1-4-1"
                         class="el-menu-vertical-demo"
                         @open="handleOpen"
                         :collapse="isCollapse">
                    <el-submenu index="1">
                        <template slot="title">
                            <i class="el-icon-location"></i>
                            <span slot="title">导航一</span>
                        </template>
                        <el-menu-item-group>
                            <span slot="title">分组一</span>
                            <el-menu-item index="1-1">选项1</el-menu-item>
                            <el-menu-item index="1-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="1-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="1-4">
                            <span slot="title">选项4</span>
                            <el-menu-item index="1-4-1">选项1</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-menu-item index="2">
                        <i class="el-icon-menu"></i>
                        <span slot="title">导航二</span>
                    </el-menu-item>
                    <el-menu-item index="3"
                                  disabled>
                        <i class="el-icon-document"></i>
                        <span slot="title">导航三</span>
                    </el-menu-item>
                    <el-menu-item index="4">
                        <i class="el-icon-setting"></i>
                        <span slot="title">导航四</span>
                    </el-menu-item>
                </el-menu>-->
            </div>
        </el-aside>

        <el-container>
            <el-header class="app-header">
                <div style="width: 60px; cursor: pointer;"
                     @click.prevent="toggleSideBar">
                    <i v-show="!isCollapse" class="el-icon-d-arrow-left"></i>
                    <i v-show="isCollapse" class="el-icon-d-arrow-right"></i>
                </div>
                <!-- 我是样例菜单 -->
                <el-menu default-active="1"
                         class="el-menu-demo tab-page"
                         mode="horizontal"
                         @select="handleSelect"
                         active-text-color="#409EFF">
                    <el-menu-item index="1">处理中心</el-menu-item>
                    <el-submenu index="2">
                        <template slot="title">我的工作台</template>
                        <el-menu-item index="2-1">选项1</el-menu-item>
                        <el-menu-item index="2-2">选项2</el-menu-item>
                        <el-menu-item index="2-3">选项3</el-menu-item>
                        <el-submenu index="2-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="2-4-1">选项1</el-menu-item>
                            <el-menu-item index="2-4-2">选项2</el-menu-item>
                            <el-menu-item index="2-4-3">选项3</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-menu-item index="3"
                                  disabled>消息中心</el-menu-item>
                    <el-menu-item index="4">
                        <a href="#">订单管理</a>
                    </el-menu-item>
                </el-menu>

                <div class="app-header-userinfo">
                    <el-dropdown trigger="hover"
                                 :hide-on-click="false">
              <span class="el-dropdown-link">
                {{ username }}
                <i class="el-icon-arrow-down el-icon--right"></i>
              </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item>我的消息</el-dropdown-item>
                            <el-dropdown-item>设置</el-dropdown-item>
                            <el-dropdown-item divided
                                              @click.native="logout">退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </div>
            </el-header>

            <el-main class="app-body">
                <template>
                    <router-view/>
                </template>
            </el-main>
        </el-container>
    </el-container>

</div>

</body>
<style>
    .admin {
        display: none
    }
</style>
<script type="text/javascript">
    var vm = new Vue({
        el: '#rrapp',
        data() {
            return {
                username: '',
                isCollapse: false,
                activeName: 'second',
                activeIndex: '1',
                activeIndex2: '1',
                showlist: true,
                treeList:[],
                defaultProps: {
                    children: 'childList',
                    label: 'name'
                }
            }
        },
        created: function () {
            this.getTreeList();

        },
        methods: {
            getTreeList(){
                var _this = this;
                $.ajax({
                    url: '/menu/getTree',
                    type: 'post',
                    async: false,
                    data: {},
                    datatype: "json",
                    success: function (data) {
                        console.log(data);
                        _this.treeList = data;
                    }
                })
            },
            handleNodeClick(tab, event){
                console.info(tab);
                if(tab.childList == null){
                    alert(1);
                }
            },
            handleClick(tab, event) {
                alert(2)
              //  console.log(tab, event);
            },
            add: function () {
                alert("asd")
                vm.showlist = false;
            },
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            handleOpen(key, keyPath) {
                console.log(key, keyPath);
            },
            handleClose(key, keyPath) {
                console.log(key, keyPath);
            }
        }
    });
</script>
</html>